const counted = [
  1186150, 1295754, 557678, 351326, 1109289, 1150816, 1211088, 1078390, 1054273,
  1157475, 571233, 1324452, 1073267, 1286596, 1296652, 1330516, 1044246,
  1211405, 1208803, 1163425, 256054, 1313527, 660143, 943569, 1103237, 1455998,
  1197257, 699907, 992190, 1330350, 1319042, 218549, 1276986, 1379903, 415095,
  1394931, 1341514, 1345971, 1147189, 1078880, 1427167, 1366395, 1340732,
  1378295, 1435115, 1426121, 1405552, 23695, 1395553, 1461315, 926776, 1431240,
  1343316, 1484949, 1353801, 1191354, 1476439, 972934, 1476831, 282083, 1488253,
  1401314, 1389704, 1509458, 1508170, 1501894, 1396234, 1479265, 1497016,
  290868, 434124, 295426, 421899, 436119, 261700, 127947, 299832, 306001,
  295712, 290003, 292385, 286778, 433823, 201050, 21176, 460498, 299117, 284398,
  419534, 365347, 303170, 426444, 332825, 279994, 380362, 545702, 556459, 43658,
  577195, 571224, 444712, 338857, 456216, 306978, 546428, 419383, 588605,
  688809, 282725, 695774, 450226, 663997, 659477, 631800, 774130, 792586,
  171227, 796722, 568963, 427153, 424607, 331415, 384737, 300176, 282397,
  118803, 314135, 275985, 416334, 555012, 469179, 644030, 323181, 659535,
  548851, 669709, 331143, 667628, 562793, 889888, 306548, 895824, 478399,
  846190, 959971, 121667, 1074320, 1112491, 1110105, 446273, 1110162, 1099194,
  718506, 1023511, 1107672, 1073502, 1000426, 292648, 1157887, 1104710, 1107770,
  1105515, 1078390, 1081451, 904673, 1112746, 1266480, 815967, 979471, 990961,
  1052849, 1146027, 1326436, 1009898, 874521, 1163371, 1248182, 1318699,
  1296811, 1211264, 350534, 977181, 1197298, 1318367, 1287677, 992877, 1294463,
  658516, 1510463, 1418042, 1515045, 1378177, 414976, 1500393, 345634, 1512705,
  1510893, 1316832, 1596408, 1586174, 1214661, 1594274, 1601435, 1518573,
  1586174, 1607963, 1539984, 1624943, 1632869, 1625828, 1660281, 600493,
];

const ids = [];

const otherIds = [
  1622603, 1623361, 1633236, 1685095, 1696694, 1687846, 1438782, 1696167,
  1621905, 1710105, 1712858, 1667827, 1711576, 1698858, 440398, 1720739,
  1539943, 1760352, 1755292, 1768919, 1704037, 1644895, 1712264, 1586841,
  1770763, 1760557, 1680303, 1433397, 1769509, 1739378, 1786864, 1671332,
  1689639, 1785364, 1789386, 1724520, 299319, 880933, 81845, 283931, 623554,
  885123, 893862, 900769, 883275, 771834, 879552, 988986, 499179, 990390,
  664560, 1020247, 929901, 1021641, 961870, 893244, 997491, 1024819, 989908,
  1018630, 1010037, 1052532, 1011523, 1092655, 1025955,
];

const dupes = [
  2171041, 2255842, 181437, 1574972, 1106356, 397085, 3925945, 5697227,
];

const get_league = (id) => {
  return fetch(
    `https://fantasy.premierleague.com/api/leagues-classic/${id}/standings`
  )
    .then((res) => res.json())
    .then((data) => ({
      name: data.league.name,
      ids: data.standings.results
        .map((r) => r.entry)
        .filter((entry) => !dupes.includes(entry)),
    }))
    .catch((e) => console.log(e));
};

const get_leagues = async (ids) => {
  const data = [];
  const invalid = [];
  for (const id of ids) {
    const leagueData = await get_league(id);
    if (leagueData.ids.length > 5) {
      invalid.push(id);
      continue;
    }
    if (
      leagueData === undefined ||
      leagueData.name === undefined ||
      leagueData.ids === undefined
    )
      continue;
    data.push(leagueData);
  }

  console.log("=====================");
  console.log(data);
};

get_leagues(otherIds);
